parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"KIzB":[function(require,module,exports) {
"use strict";var o,n,e=this&&this.__assign||function(){return(e=Object.assign||function(o){for(var n,e=1,r=arguments.length;e<r;e++)for(var t in n=arguments[e])Object.prototype.hasOwnProperty.call(n,t)&&(o[t]=n[t]);return o}).apply(this,arguments)};function r(o,n){return{height:o,width:n,cells:t({x:o,y:n})}}function t(o){for(var n=[],e=1;e<=o.x;e++)for(var r=1;r<=o.y;r++){var t={coords:{x:e,y:r},contains:null};n.push(t)}return n}function c(o,n,e){var r=document.querySelector(".field-row:nth-last-child(".concat(n,") > .field-cell:nth-child(").concat(o));r&&(r.textContent="".concat(e||""),r.className="field-cell",e&&r.classList.add("field-cell--".concat(e)))}function l(o,n,e){var r=o.cells.findIndex(function(o){return o.coords.x===n&&o.coords.y===e});document.querySelector(".field-row:nth-last-child(".concat(e,") > .field-cell:nth-child(").concat(n));o.cells[r].contains=null}function s(o,n){for(var e=[2,4],r=n.cells.filter(function(o){return!o.contains}).map(function(o){return o.coords}),t=function(o){var t=r[Math.floor(Math.random()*r.length)];r=r.filter(function(o){return o!==t});var l=Math.floor(10*Math.random())<9?e[0]:e[1],s=n.cells.findIndex(function(o){return o.coords===t});n.cells[s].contains={coords:t,value:l},c(t.x,t.y,l)},l=0;l<o;l++)t();return n}function i(o,r,t){var c,s,a,u,d=e({},o.coords);switch(t){case n.ArrowUp:d={x:o.coords.x,y:o.coords.y+1};break;case n.ArrowDown:d={x:o.coords.x,y:o.coords.y-1};break;case n.ArrowLeft:d={x:o.coords.x-1,y:o.coords.y};break;case n.ArrowRight:d={x:o.coords.x+1,y:o.coords.y}}var f=r.cells.find(function(o){return o.coords.x===d.x&&o.coords.y===d.y});if(!f||(null===(c=f.contains)||void 0===c?void 0:c.value)&&(null===(s=f.contains)||void 0===s?void 0:s.value)!==o.value){var v=r.cells.findIndex(function(n){return n.coords.x===o.coords.x&&n.coords.y===o.coords.y});return r.cells[v].contains=o,o}if((null===(a=f.contains)||void 0===a?void 0:a.value)&&(null===(u=f.contains)||void 0===u?void 0:u.value)===o.value)return l(r,o.coords.x,o.coords.y),f.contains.value+=o.value,w+=f.contains.value,f.contains;l(r,o.coords.x,o.coords.y),i(e(e({},o),{coords:e({},d)}),r,t)}function a(o,n,e,r){r.cells.filter(function(n){return n.contains&&n.coords[e]===o}).map(function(o){return o.contains}).forEach(function(o){o&&i(o,r,n)})}function u(o){o.cells.forEach(function(o){var n;c(o.coords.x,o.coords.y,null===(n=o.contains)||void 0===n?void 0:n.value)})}function d(o){var n;o.cells.some(function(o){var n;return 2048===(null===(n=o.contains)||void 0===n?void 0:n.value)})&&(null===(n=document.querySelector(".message-win"))||void 0===n||n.classList.remove("hidden"))}function f(o){var n=document.querySelector(".game-score");n&&(n.textContent="".concat(w))}function v(e,r){switch(r){case n.ArrowDown:for(var t=1;t<=e.height;t++)a(t,r,o.Y,e);break;case n.ArrowUp:for(t=e.height-1;t;t--)a(t,r,o.Y,e);break;case n.ArrowLeft:for(t=1;t<=e.height;t++)a(t,r,o.X,e);break;case n.ArrowRight:for(t=e.width-1;t;t--)a(t,r,o.X,e);break;default:return e}return e}function h(o,e){var r=JSON.parse(JSON.stringify(o));for(var t in n){if(console.log(o),!!(r=v(r,n[t])).cells.filter(function(o){return!o.contains}).length)return console.log("is not game onver"),!1}return console.log("is game onver"),!0}function y(o){var e;if(Object.values(n).includes(n[o.key])){v(A,o.key);var r=!A.cells.filter(function(o){return!o.contains}).length;r&&h(A,w)&&(null===(e=document.querySelector(".message-lose"))||void 0===e||e.classList.remove("hidden")),(null==m?void 0:m.classList.contains("start"))&&(m.classList.replace("start","restart"),m.textContent="Restart"),r||s(1,A),u(A),f(A),d(A)}}!function(o){o.X="x",o.Y="y"}(o||(o={})),function(o){o.ArrowUp="ArrowUp",o.ArrowDown="ArrowDown",o.ArrowLeft="ArrowLeft",o.ArrowRight="ArrowRight"}(n||(n={}));var w,m=document.querySelector(".start"),g=document.querySelectorAll(".field-row").length,x=document.querySelectorAll(".field-row:first-child > .field-cell").length,A=r(g,x);null==m||m.addEventListener("click",function(){var o,n,e;w=0,A.cells.filter(function(o){return o.contains})&&(u(A=r(g,x)),document.body.removeEventListener("keyup",y)),null===(o=document.querySelector(".message-start"))||void 0===o||o.classList.add("hidden"),null===(n=document.querySelector(".message-lose"))||void 0===n||n.classList.add("hidden"),null===(e=document.querySelector(".message-win"))||void 0===e||e.classList.add("hidden"),s(2,A),f(A),document.body.addEventListener("keyup",y)});
},{}]},{},["KIzB"], null)
//# sourceMappingURL=main.a14f073b.js.map